syntax = "proto3";

package transaction;

import "transaction/sort.proto";

option go_package = "./transaction";

message OrderServiceItem {
    int64 service_type_item_id = 1;
    string name = 2;
    int64 qty = 3;
    int64 price = 4;
    string status = 5;
}

message OrderServiceType {
    int64 id = 1;
    string based = 2;
    string name = 3;
    string description = 4;
    string estimation = 5;
    string min_weight = 6;
    string price = 7;
    repeated OrderServiceItem items = 8;
}

message OrderService {
    int64 material_id = 1;
    OrderServiceType service_type = 2;
    float weight = 3;
    string initial_note = 4;
    string final_note = 5;
    int64 amount = 6;
    repeated string initial_images = 7;
    repeated string final_images = 8;
    repeated OrderServiceItem items = 9;
}

message Adjustment {
    int64 invoice_id = 1;
    int64 adjustment_id = 2;
    int64 adjustment_nominal = 3;
    string adjustment_type = 4;
    string adjustment_effect = 5;
    string adjustment_start_date = 6;
    string adjustment_end_date = 7;
}

message CreateOrderRequest {
    int64 outlet_id = 1;
    string order_number = 2;
    int64 customer_id = 3;
    int64 payment_method_id = 4;
    repeated OrderService services = 5;
    repeated Adjustment adjustment = 6;
}

message CreateOrderResponse {
    int64 status = 1;
    string error = 2;
}

message UpdateStatusOrderRequest {
    int64 id = 1;
    string status = 2;
}
  
message UpdateStatusOrderResponse {
    int64 status = 1;
    string error = 2;
    GetOrder data = 3;
}

message Invoice {
    int64 id = 1;
    string number = 5;
    int64 amount = 6;
    int64 total_amount = 7;
    repeated Payment payment = 10;
    repeated Adjustment adjustment = 11;
}

message Payment {
    int64 id = 1;
    int64 payment_method_id = 2;
    string number = 3;
    int64 amount = 4;
    int64 total_paid = 5;
    string created_at = 6;
}

message OrderCustomer {
    int64 id = 1;
    string name = 2;
    string phone_number = 3;
    string address = 4;
}
  
message GetOrder {
    int64 id = 1;
    int64 outlet_id = 2;
    string outlet_name = 3;
    string outlet_address = 4;
    string order_number = 5;
    OrderCustomer customer = 6;
    string status = 7;
    repeated OrderService services = 8;
    Invoice invoice = 9;
}
  
message GetOrderRequest { 
    int64 id = 1;
}
  
message GetOrderResponse {
    int64 status = 1;
    string error = 2;
    GetOrder data = 3;
}
  
message ListOrderFilter {
    string number = 1;
    string customer_name = 2;
    string customer_phone_number = 3;
    string status = 4;
}
  
message ListOrderRequest {
    int64 limit = 1;
    int64 skip = 2;
    ListOrderFilter filter = 3;
    bool like = 4;
    SortRequest sort = 5;
}
  
message ListOrderResponse {
    int64 status = 1;
    string error = 2;
    repeated GetOrder data = 3;
    int64 total= 4;
}
